<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>page</title>
		<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
	</head>
	<style>
		.divstyle {
			width: 50%;
			border: 1px solid;
			border-color: #efefef;
			float: left;
			box-sizing: border-box;
			font-family: "微软雅黑 Light";
			font-size: 12px;
		}
	</style>
	<body>
		<div class="divstyle" id="old"></div>
		<div class="divstyle" id="new"></div>
	</body>
	<script>
		// 请求获取数据源
		$.get("https://www.easy-mock.com/mock/5c6e22c28ef35e1f80e352ab/Intelligence_statistics/index", function(data) {
			localStorage.setItem("data", JSON.stringify(data)); // 数据源储存本地存储； 命名data  注意： 存储的时候记得将对象转字符串存储
		});


		var ids = 2; //  这个值就是你获取的id值，  根据你选择的来动态改变
		var olddata = localStorage.getItem("data"); //  获取存储数据
		var jsonObj = JSON.parse(olddata); // 转换对象；
		document.getElementById("old").innerText = olddata;
		//console.log("old>>>>>");
		//console.log(JSON.parse(newdata));
		var rows = jsonObj.list; //   获取list
		for (var i = 0; i < rows.length; i++) { // 便遍历 list
			if (ids == rows[i].id) { //  根据你传入的id值来判断需要寻找的对象
				rows[i].state == 0 ? rows[i].state = 1 : rows[i].state = 0; //  改变状态  关注/未关注
			}
		}
		//console.log("new>>>>>");
		localStorage.setItem("data", JSON.stringify(jsonObj)); // 将新值存储到data名下，覆盖
		console.log(JSON.parse(localStorage.getItem("data")));
		document.getElementById("new").innerText = JSON.stringify(jsonObj);


		//注意：   因为你的数据现在是写死的，所以你改变值之后需要判断一下data是否存在，如果存在就不要在去调用你的请求数据接口。
		//  不然每次都是你写死的值，本次存储的数据并没有生效；


		



		//localStorage=JSON.stringify(localStorage)
		//$.each(localStorage, function(i) {
		//})

		//将已关注数据从localStorage删除
		//localStorage.removeItem(key_code);
	</script>
</html>
